(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{124:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/isobluehd_conn_diag-b789dfe62e8ec37d130a71ce6d08715a.png"},125:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/test_cameras-a2729d3acaa13abb5005336ab74c64b0.png"},126:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/live_views-3d9bf2d68b9adb33eb9228a93ca839b3.png"},74:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return u}));var r=n(2),a=n(6),o=(n(0),n(89)),i={title:"Embrace Yourself",author:"Yang Wang",authorURL:"https://github.com/wang701"},l={permalink:"/blog/2019/05/16/isobluehd",editUrl:"https://github.com/ISOBlue/isoblue.github.io/edit/master/v2-website/blog/blog/2019-05-16-isobluehd.md",source:"@site/blog/2019-05-16-isobluehd.md",description:"Embrace yourself, ISOBlue HD is coming.",date:"2019-05-16T00:00:00.000Z",tags:[],title:"Embrace Yourself",readingTime:2.74,truncated:!0,prevItem:{title:"ISOBlue 2.0 Explained (Part 1): CAN Logging",permalink:"/blog/2019/05/21/can-logging"},nextItem:{title:"DPAC Experiment",permalink:"/blog/2018/04/04/dpac"}},s=[],c={rightToc:s};function u(e){var t=e.components,i=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},c,i,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Embrace yourself, ISOBlue HD is coming.")),Object(o.b)("p",null,"For one of the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://engineering.purdue.edu/VADL/publications/He_mipr_19.pdf"}),"projects")," in ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://oatscenter.org/"}),"OATS"),", we need to improve a multi-cameras\nlogging system that would record the video streams of a combine's header actions\nduring harvest operations. The current method involves a human to kick off the\nvideo logging process."),Object(o.b)("p",null,"One of the primary goals of using ISOBlue as a sensor platform is to eliminate\nthe need of human interventions in sensing and collecting different types of\nagricultural machinery data. Therefore, this question comes in naturally:"),Object(o.b)("p",null,'"Can we use an ISOBlue to log videos?"'),Object(o.b)("p",null,"The answer is ",Object(o.b)("strong",{parentName:"p"},"yes"),"."),Object(o.b)("p",null,"Apart from the existing hardware that enable an ISOBlue to collect ISOBUS\ndata from tractors and combines, we added a few things:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Internet Protocol (IP) cameras from ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://store.ui.com/products/unifi-video-camera-g3"}),"Ubiquiti")," and ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://www.amazon.com/Geovision-GV-FER12203-Fisheye-Rugged-Camera/dp/B019YIXWI0"}),"GeoVision")," that\noffer RTSP streams"),Object(o.b)("li",{parentName:"ul"},"A Power-Over-Ethernet (PoE) switch from ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"http://www.veracityglobal.com/products/networked-video-integration-devices/camswitch-mobile.aspx"}),"Veracity")),Object(o.b)("li",{parentName:"ul"},"A custom-made PCB that relays 12VDC with the toggles of an external signal"),Object(o.b)("li",{parentName:"ul"},"A 4TB USB hard drive")),Object(o.b)("p",null,"The following figure gives an overview of the hardware connections:"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Connection diagram",src:n(124).default})),Object(o.b)("p",null,"For testing purpose, a PSU was included to emulate the power (12VDC) coming from\na typical machine. The 12VDC was splited into two: one for supplying the ISOBlue\nand the other for supplying custom relay board we made."),Object(o.b)("p",null,"The relay board controlled the power to the PoE switch. Shortly after the\nISOBlue booted, it toggled the GPIO signal to high. The high signal triggered a\nFET on the relay board to be turned on. It further activated the relay to allow\nthe power from the PSU to flow through the board. The output from the relay\nboard turned the PoE switch on. Finally, the PoE switch supplied power to all of\nthe IP cameras."),Object(o.b)("p",null,"After everything was powered up, ISOBlue automatically assigned IP addresses to\nitself as well as the IP cameras by using ",Object(o.b)("inlineCode",{parentName:"p"},"dnsmasq")," as a DHCP server. For video\nlogging, ",Object(o.b)("inlineCode",{parentName:"p"},"systemd")," services that utilized ",Object(o.b)("inlineCode",{parentName:"p"},"ffmpeg")," commands obtained the RTSP\nstreams from each camera and saved them onto an external hard drive."),Object(o.b)("p",null,Object(o.b)("img",{alt:"Test camera gigs",src:n(125).default})),Object(o.b)("p",null,"A litte bit of fun: with ISOBlue's LTE connectivity, we port-forwarded three\ncameras' RTSP ports to local ports on a desktop in our lab. ISOBlue was\nessentially broadcasting the streams to our desktop. By using a common video\nplayer like ",Object(o.b)("inlineCode",{parentName:"p"},"VLC player"),", we were able to watch live streams of the three\ncameras simultaneoulsy as shown in the picture below:"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Live view",src:n(126).default})),Object(o.b)("p",null,"Now we could watch live streams from the cameras when the system is deployed in\nthe field to check out what the machine is doing (as long as there is LTE\nconnectivity)!"),Object(o.b)("p",null,"We also tested the scenario of the ISOBlue going to suspend and waking up. For\nsuspends, The GPIO pin was pulled down accordingly. As a result, the relay board\nwas not outputting any more power; the PoE switch was off, and the cameras were\nalso off. After the ISOBlue woke up, GPIO pulled to high, relay activated, PoE\nswitch on, cameras on, and ISOBlue restarted video logging sessions."),Object(o.b)("p",null,"The first round of tests seemed to be good for ISOBlue HD. We still need to work\non the mounts for cameras as well as a new enclosure for putting everything\ntogether. So stay tuned for updates and pictures!"))}u.isMDXComponent=!0},89:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),u=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),d=r,m=p["".concat(i,".").concat(d)]||p[d]||b[d]||o;return n?a.a.createElement(m,l(l({ref:t},c),{},{components:n})):a.a.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);