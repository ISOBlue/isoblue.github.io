<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">Flashing an Image | ISOBlue</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Flashing an Image | ISOBlue"><meta data-react-helmet="true" name="description" content="Before You Start ..."><meta data-react-helmet="true" property="og:description" content="Before You Start ..."><meta data-react-helmet="true" property="og:url" content="https://isoblue.org/docs/sw/flashing"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://isoblue.org/docs/sw/flashing"><link rel="stylesheet" href="/styles.6af30466.css">
<link rel="preload" href="/styles.8c87156f.js" as="script">
<link rel="preload" href="/runtime~main.76e6e62e.js" as="script">
<link rel="preload" href="/main.cd3eda12.js" as="script">
<link rel="preload" href="/1.c1636144.js" as="script">
<link rel="preload" href="/2.15781dc9.js" as="script">
<link rel="preload" href="/3.f369f4cb.js" as="script">
<link rel="preload" href="/1be78505.c5340cf9.js" as="script">
<link rel="preload" href="/34.32e457ed.js" as="script">
<link rel="preload" href="/20ac7829.d91f3221.js" as="script">
<link rel="preload" href="/17896441.64a7a8d2.js" as="script">
<link rel="preload" href="/51435d79.8d7cabf3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="isoblue-logo"><strong class="navbar__title">ISOBlue</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/OATS-Group/isoblue-avena" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://groups.google.com/g/isoblue" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Google Group</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="isoblue-logo"><strong class="navbar__title">ISOBlue</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/">Blog</a></li><li class="menu__list-item"><a href="https://github.com/OATS-Group/isoblue-avena" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://groups.google.com/g/isoblue" target="_blank" rel="noopener noreferrer" class="menu__link">Google Group</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">What is an ISOBlue 2.0?</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Hardware</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/hw/bom">Hardware Bill of Materials</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/hw/hwbuild">Hardware Assembly</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Software</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sw/swbuild">Build Instructions</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/sw/flashing">Flashing an Image</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sw/setup">Setting It Up</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Deploy</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/misc/deploy">Deployment</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/data/data">Public Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/data/read">How to Read Data</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Flashing an Image</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="before-you-start-"></a>Before You Start ...<a aria-hidden="true" tabindex="-1" class="hash-link" href="#before-you-start-" title="Direct link to heading">#</a></h2><p>Here are some stuff you need before you start:</p><ul><li>An microSD card that is at least 4GB.</li><li>A USB to serial adapter.</li><li>A 5 VDC power supply.</li><li>A serial adapter. It would be the best if you get it from <a href="https://developer.toradex.com/products/carrier-board-accessory-kit" target="_blank" rel="noopener noreferrer">Toradex</a>
since it needs a correct header to connect to the serial ports on the Ixora
module.</li><li>All parts are properly installed.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="preparing-a-flashable-sd-card"></a>Preparing a Flashable SD Card<a aria-hidden="true" tabindex="-1" class="hash-link" href="#preparing-a-flashable-sd-card" title="Direct link to heading">#</a></h2><p>After you follow through the <a href="/docs/sw/swbuild">building instructions</a> or download
the <a href="https://drive.google.com/open?id=0B6AeE6Ne4z3aX0VFXzRVWGNSRjQ" target="_blank" rel="noopener noreferrer">prebuilt ISOBlue image</a>, you should have an image tar ball. You would
need to extract the tar ball content:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">you@yourpc:~$ </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> xvf Isoblue2_apalis-imx6_image_2.7b2-YYYYMMDD.tar.bz2</span></div></div></div></div></div><p>After extracting process, the extracted directory will look like the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">extracted-dir</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â””â”€â”€ apalis-imx6_bin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â””â”€â”€ imx_flash</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â””â”€â”€ mnt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â””â”€â”€ rootfs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">update.sh</span></div></div></div></div></div><ul><li><code>apalis-imx6_bin</code> contains the kernel image <code>uImage</code> as well as the image
files for flashing purposes.</li><li><code>imx_flash</code> contains custom scripts from Toradex for flashing iMX modules.</li><li><code>rootfs</code> contains all the ISOBlue files that would be flashed onto the
flash memory.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="editing-rootfsetchosts"></a>Editing <code>rootfs/etc/hosts</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#editing-rootfsetchosts" title="Direct link to heading">#</a></h3><p>The default <code>rootfs/etc/hosts</code> contains a hostname that would cause malfunction
of Kafka. To correct this, change the first line to:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">127.0.0.1 localhost.localdomain   apalis-imx6</span></div></div></div></div></div><p>Save the changed file.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="making-a-flashable-sd-card"></a>Making a Flashable SD card<a aria-hidden="true" tabindex="-1" class="hash-link" href="#making-a-flashable-sd-card" title="Direct link to heading">#</a></h3><p>Use <code>update.sh</code> to make a flashable microSD card:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">you@yourpc:~/ib-image/rootfs$ ./update.sh -o /yourmicroSDcard/mntpt</span></div></div></div></div></div><p>After the script finishes, you will have a flashable microSD card.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="flashing"></a>Flashing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#flashing" title="Direct link to heading">#</a></h2><p>Please follow the listed steps:</p><ul><li>Connect the serial adapter to the corresponding serial header (X22) on Ixora
board. Bring up your favoriate serial terminal.</li><li>Insert the flashable microSD card you have prepared to SD card slot (X19).</li><li>Connect the power supply to the Ixora board.</li><li>Apply power and hit any key to stop autobooting.</li></ul><p>After interrupting the boot sequence, you will be put into U-Boot command line.</p><p>Then, for <strong>Ixora V1.0A</strong>, do:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Apalis iMX6 # setenv drive 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Apalis iMX6 # setenv setupdate &#x27;fatload mmc ${drive}:1 ${loadaddr} flash_mmc.img; source ${loadaddr}&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Apalis iMX6 # setenv fdt_file imx6q-apalis-ixora.dtb</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Apalis iMX6 # saveenv</span></div></div></div></div></div><ul><li>Reset the board and hit any key to stop autobooting. In U-Boot command line,
do:</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Apalis iMX6 </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># run setupdate</span></div></div></div></div></div><p>and</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Apalis iMX6 </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># run update</span></div></div></div></div></div><p>For <strong>Ixora V1.1A</strong>, you can skip the <code>setenv</code> and <code>saveenv</code> commands. After
dropping into the U-Boot command line for the first time, do:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Apalis iMX6 </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># run setupdate</span></div></div></div></div></div><p>and</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Apalis iMX6 </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># run update</span></div></div></div></div></div><p>If the flashing is successful, the device will automatically boot into the
ISOBlue image. Don&#x27;t turn it off or disconnect anything yet. Please proceed to
<a href="/docs/sw/setup">Setting It Up</a> to configure the newly flashed ISOBlue 2.0.</p><p>You can also take a look at <a href="https://developer.toradex.com/knowledge-base/flashing-linux-on-imx6-modules#Apalis_iMX6" target="_blank" rel="noopener noreferrer">Toradex&#x27;s instructions</a> for flashing an image as
this documentaion is referenced heavily upon this resource.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ISOBlue/isoblue.github.io/edit/source/website-v2/docs/sw/flashing.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/sw/swbuild"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Build Instructions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/sw/setup"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Setting It Up Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-you-start-" class="table-of-contents__link">Before You Start ...</a></li><li><a href="#preparing-a-flashable-sd-card" class="table-of-contents__link">Preparing a Flashable SD Card</a><ul><li><a href="#editing-rootfsetchosts" class="table-of-contents__link">Editing <code>rootfs/etc/hosts</code></a></li><li><a href="#making-a-flashable-sd-card" class="table-of-contents__link">Making a Flashable SD card</a></li></ul></li><li><a href="#flashing" class="table-of-contents__link">Flashing</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/hw/bom">Hardware</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sw/swbuild">Software</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://groups.google.com/g/isoblue" target="_blank" rel="noopener noreferrer" class="footer__link-item">Google Group</a></li><li class="footer__item"><a href="https://github.com/OATS-Group/isoblue-avena/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issue Tracker</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/OATS-Group/isoblue-avena" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Open Ag Systems and Technology Center, Purdue University. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.8c87156f.js"></script>
<script src="/runtime~main.76e6e62e.js"></script>
<script src="/main.cd3eda12.js"></script>
<script src="/1.c1636144.js"></script>
<script src="/2.15781dc9.js"></script>
<script src="/3.f369f4cb.js"></script>
<script src="/1be78505.c5340cf9.js"></script>
<script src="/34.32e457ed.js"></script>
<script src="/20ac7829.d91f3221.js"></script>
<script src="/17896441.64a7a8d2.js"></script>
<script src="/51435d79.8d7cabf3.js"></script>
</body>
</html>