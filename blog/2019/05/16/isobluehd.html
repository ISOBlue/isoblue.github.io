<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Embrace Yourself · ISOBlue 2.0</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="**Embrace yourself, ISOBlue HD is coming.**"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Embrace Yourself · ISOBlue 2.0"/><meta property="og:type" content="website"/><meta property="og:url" content="https://isoblue.org/blog/2019/05/16/isobluehd.html"/><meta property="og:description" content="**Embrace yourself, ISOBlue HD is coming.**"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://isoblue.org/blog/atom.xml" title="ISOBlue 2.0 Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://isoblue.org/blog/feed.xml" title="ISOBlue 2.0 Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/oats_logo.png" alt="ISOBlue 2.0"/><h2 class="headerTitleWithLogo">ISOBlue 2.0</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/bom.html" target="_self">Docs</a></li><li class="siteNavGroupActive"><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="https://github.com/ISOBlue" target="_self">Github</a></li><li class=""><a href="https://groups.google.com/forum/?fromgroups#!forum/isoblue" target="_self">Mailing List</a></li><li class=""><a href="/help.html" target="_self">Help</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Recent Posts</span></h2></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/blog/2019/05/16/isobluehd.html">Embrace Yourself</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/04/04/dpac.html">DPAC Experiment</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/02/19/antenna-issue.html">Houston, we have a problem</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/02/16/new-site.html">New ISOBlue Site</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/04/14/CANdroid-manure.html">CANdroid During a Manure Spreading Session</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2019/05/16/isobluehd.html">Embrace Yourself</a></h1><p class="post-meta">May 16, 2019</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/wang701" target="_blank" rel="noreferrer noopener">Yang Wang</a></p></div></header><div><span><p><strong>Embrace yourself, ISOBlue HD is coming.</strong></p>
<!--truncate-->
<p>For one of the <a href="https://engineering.purdue.edu/VADL/publications/He_mipr_19.pdf">projects</a> in <a href="https://oatscenter.org/">OATS</a>, we need to improve a multi-cameras
logging system that would record the video streams of a combine's header actions
during harvest operations. The current method involves a human to kick off the
video logging process.</p>
<p>One of the primary goals of using ISOBlue as a sensor platform is to eliminate
the need of human interventions in sensing and collecting different types of
agricultural machinery data. Therefore, this question comes in naturally:</p>
<p>&quot;Can we use an ISOBlue to log videos?&quot;</p>
<p>The answer is <strong>yes</strong>.</p>
<p>Apart from the existing hardware that enable an ISOBlue to collect ISOBUS
data from tractors and combines, we added a few things:</p>
<ul>
<li>Internet Protocol (IP) cameras from <a href="https://store.ui.com/products/unifi-video-camera-g3">Ubiquiti</a> and <a href="https://www.amazon.com/Geovision-GV-FER12203-Fisheye-Rugged-Camera/dp/B019YIXWI0">GeoVision</a> that
offer RTSP streams</li>
<li>A Power-Over-Ethernet (PoE) switch from <a href="http://www.veracityglobal.com/products/networked-video-integration-devices/camswitch-mobile.aspx">Veracity</a></li>
<li>A custom-made PCB that relays 12VDC with the toggles of an external signal</li>
<li>A 4TB USB hard drive</li>
</ul>
<p>The following figure gives an overview of the hardware connections:</p>
<p><img src="../../../assets/isobluehd_conn_diag.png" alt="Connection diagram"></p>
<p>For testing purpose, a PSU was included to emulate the power (12VDC) coming from
a typical machine. The 12VDC was splited into two: one for supplying the ISOBlue
and the other for supplying custom relay board we made.</p>
<p>The relay board controlled the power to the PoE switch. Shortly after the
ISOBlue booted, it toggled the GPIO signal to high. The high signal triggered a
FET on the relay board to be turned on. It further activated the relay to allow
the power from the PSU to flow through the board. The output from the relay
board turned the PoE switch on. Finally, the PoE switch supplied power to all of
the IP cameras.</p>
<p>After everything was powered up, ISOBlue automatically assigned IP addresses to
itself as well as the IP cameras by using <code>dnsmasq</code> as a DHCP server. For video
logging, <code>systemd</code> services that utilized <code>ffmpeg</code> commands obtained the RTSP
streams from each camera and saved them onto an external hard drive.</p>
<p><img src="../../../assets/test_cameras.png" alt="Test camera gigs"></p>
<p>A litte bit of fun: with ISOBlue's LTE connectivity, we port-forwarded three
cameras' RTSP ports to local ports on a desktop in our lab. ISOBlue was
essentially broadcasting the streams to our desktop. By using a common video
player like <code>VLC player</code>, we were able to watch live streams of the three
cameras simultaneoulsy as shown in the picture below:</p>
<p><img src="../../../assets/live_views.png" alt="Live view"></p>
<p>Now we could watch live streams from the cameras when the system is deployed in
the field to check out what the machine is doing (as long as there is LTE
connectivity)!</p>
<p>We also tested the scenario of the ISOBlue going to suspend and waking up. For
suspends, The GPIO pin was pulled down accordingly. As a result, the relay board
was not outputting any more power; the PoE switch was off, and the cameras were
also off. After the ISOBlue woke up, GPIO pulled to high, relay activated, PoE
switch on, cameras on, and ISOBlue restarted video logging sessions.</p>
<p>The first round of tests seemed to be good for ISOBlue HD. We still need to work
on the mounts for cameras as well as a new enclosure for putting everything
together. So stay tuned for updates and pictures!</p>
</span></div></div><div class="blogSocialSection"></div></div><div class="blog-recent"><a class="button" href="/blog">Recent Posts</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/docusaurus.svg" alt="ISOBlue 2.0" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/howitworks.html">How it Works?</a><a href="/docs/bom.html">Bill of Materials</a><a href="/docs/build.html">Software Build Instructions</a></div><div><h5>Community</h5><a href="/en/users.html">User Showcase</a><a href="https://groups.google.com/forum/?fromgroups#!forum/isoblue">Mailing List</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" href="https://github.com/ISOBlue/" data-icon="octicon-star" data-count-href="/ISOBlue/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://engineering.purdue.edu/oatsgroup/" target="_blank" class="fbOpenSource"><img src="/img/oats_logo.png" alt="OATS" width="170" height="45"/></a></footer></div></body></html>